(this.webpackJsonpchromatify=this.webpackJsonpchromatify||[]).push([[0],{104:function(e,t,a){},105:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(22),s=a.n(c),i=a(31),o=a(38),l=a(66),u=a(21),j=a(7),b="SET_ALBUMS",d="ADD_ALBUMS",h="SET_ARTISTS",m="ADD_ARTISTS",p="SET_PLAYLIST",O="ADD_PLAYLIST",x="SET_TRACKS",f="ADD_TRACKS",v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=t.albums;switch(t.type){case b:return a;case d:return Object(j.a)(Object(j.a)({},e),{},{next:a.next,items:[].concat(Object(u.a)(e.items),Object(u.a)(a.items))});default:return e}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=t.artists;switch(t.type){case h:return a;case m:return Object(j.a)(Object(j.a)({},e),{},{next:a.next,items:[].concat(Object(u.a)(e.items),Object(u.a)(a.items))});default:return e}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=t.playlists;switch(t.type){case p:return a;case O:return Object(j.a)(Object(j.a)({},e),{},{next:a.next,items:[].concat(Object(u.a)(e.items),Object(u.a)(a.items))});default:return e}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=t.tracks;switch(t.type){case x:return a;case f:return Object(j.a)(Object(j.a)({},e),{},{next:a.next,items:[].concat(Object(u.a)(e.items),Object(u.a)(a.items))});default:return e}},S=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.c,N=Object(o.d)(Object(o.b)({albums:v,artists:y,playlist:g,tracks:k}),S(Object(o.a)(l.a))),_=a(43),T=a(44),E=a(49),w=a(47),C=a(12),A=a(9),D=a(112),L=a(107),R=a(1),I=function(){return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("h1",{className:"main-heading",children:"Chromatify"}),Object(R.jsx)("h2",{className:"main-heading"})]})},P=Object(i.b)()((function(e){var t=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CLIENT_ID:"e858fe4463dd4d04ac08c84bc3a707ce",REACT_APP_AUTHORIZE_URL:"https://accounts.spotify.com/authorize",REACT_APP_REDIRECT_URL:"http://localhost:3000/redirect"}),a=t.REACT_APP_CLIENT_ID,r=t.REACT_APP_AUTHORIZE_URL,c=t.REACT_APP_REDIRECT_URL,s=e.isValidSession,i=e.location.state,o=i&&i.session_expired;return Object(R.jsx)(n.a.Fragment,{children:s()?Object(R.jsx)(A.a,{to:"/dashboard"}):Object(R.jsxs)("div",{className:"login",children:[Object(R.jsx)(I,{}),o&&Object(R.jsx)(D.a,{variant:"info",children:"Session expired. Please login again."}),Object(R.jsx)(L.a,{variant:"info",type:"submit",onClick:function(){window.location="".concat(r,"?client_id=").concat(a,"&redirect_uri=").concat(c,"&response_type=token&show_dialog=true")},children:"Login to spotify"})]})})})),V=a(13),F=a.n(V),B=a(10),U=a(37),M=a.n(U),J=function(){try{var e=JSON.parse(localStorage.getItem("params"));e&&(M.a.defaults.headers.common.Authorization="Bearer ".concat(e.access_token))}catch(t){console.log("Error setting auth",t)}},H=function(e){Object(E.a)(a,e);var t=Object(w.a)(a);function a(){return Object(_.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.setExpiryTime,a=e.history,r=e.location;try{if(F.a.isEmpty(r.hash))return a.push("/dashboard");var n=r.hash.slice(1).split("&").reduce((function(e,t){var a=t.split("="),r=Object(B.a)(a,2),n=r[0],c=r[1];return e[n]=c,e}),{}),c=(new Date).getTime()+1e3*n.expires_in;localStorage.setItem("params",JSON.stringify(n)),localStorage.setItem("expiry_time",c),t(c),a.push("/dashboard")}catch(s){a.push("/")}}},{key:"render",value:function(){return null}}]),a}(n.a.Component),K=a(6),W=a.n(K),Y=a(11),q=function(){var e=Object(Y.a)(W.a.mark((function e(t,a){var r;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J(),e.next=3,M.a.get(t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),z=function(e){return{type:b,albums:e}},G=function(e){return{type:h,artists:e}},X=function(e){return{type:p,playlists:e}},Z=function(e){return{type:x,tracks:e}},Q=function(e){return function(){var t=Object(Y.a)(W.a.mark((function t(a){var r;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("url",e),t.next=4,q(e);case 4:return r=t.sent,console.log("categoriess",r),t.abrupt("return",a((n=r.albums,{type:d,albums:n})));case 9:t.prev=9,t.t0=t.catch(0),console.log("error",t.t0);case 12:case"end":return t.stop()}var n}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},$=function(e){return function(){var t=Object(Y.a)(W.a.mark((function t(a){var r;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("url",e),t.next=4,q(e);case 4:return r=t.sent,console.log("categoriess",r),t.abrupt("return",a((n=r.artists,{type:m,artists:n})));case 9:t.prev=9,t.t0=t.catch(0),console.log("error",t.t0);case 12:case"end":return t.stop()}var n}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},ee=function(e){return function(){var t=Object(Y.a)(W.a.mark((function t(a){var r;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("url",e),t.next=4,q(e);case 4:return r=t.sent,console.log("categoriess",r),t.abrupt("return",a((n=r.playlists,{type:O,playlists:n})));case 9:t.prev=9,t.t0=t.catch(0),console.log("error",t.t0);case 12:case"end":return t.stop()}var n}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},te=function(e){return function(){var t=Object(Y.a)(W.a.mark((function t(a){var r;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("url",e),t.next=4,q(e);case 4:return r=t.sent,console.log("categoriess",r),t.abrupt("return",a((n=r.tracks,{type:f,tracks:n})));case 9:t.prev=9,t.t0=t.catch(0),console.log("error",t.t0);case 12:case"end":return t.stop()}var n}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},ae=a(113),re=a.p+"static/media/music.eecbb536.jpeg",ne=function(e){var t=e.albums,a=e.artists;return console.log("artists test",a),Object(R.jsx)(n.a.Fragment,{children:Object.keys(t).length>0&&Object(R.jsx)("div",{className:"albums",children:t.items.map((function(e,t){return Object(R.jsx)(n.a.Fragment,{children:Object(R.jsxs)(ae.a,{style:{width:"18rem"},children:[Object(R.jsx)("a",{target:"_blank",href:e.external_urls.spotify,rel:"noopener noreferrer",className:"card-image-link",children:F.a.isEmpty(e.images)?Object(R.jsx)("img",{src:re,alt:""}):Object(R.jsx)(ae.a.Img,{variant:"top",src:e.images[0].url,alt:""})}),Object(R.jsxs)(ae.a.Body,{children:[Object(R.jsx)(ae.a.Title,{children:e.name}),Object(R.jsx)(ae.a.Text,{children:Object(R.jsx)("small",{children:e.artists.map((function(e){return e.name})).join(", ")})})]})]})},t)}))})})},ce=a.p+"static/media/profile.8da33151.jpeg",se=function(e){var t=e.artists;return Object(R.jsx)(n.a.Fragment,{children:Object.keys(t).length>0&&Object(R.jsx)("div",{className:"artists",children:t.items.map((function(e,t){return console.log("artist check",e),Object(R.jsx)(n.a.Fragment,{children:Object(R.jsxs)(ae.a,{style:{width:"18rem"},children:[Object(R.jsx)("a",{target:"_blank",href:e.external_urls.spotify,rel:"noopener noreferrer",className:"card-image-link",children:F.a.isEmpty(e.images)?Object(R.jsx)("img",{src:ce,alt:""}):Object(R.jsx)(ae.a.Img,{variant:"top",src:e.images[0].url,alt:""})}),Object(R.jsx)(ae.a.Body,{children:Object(R.jsx)(ae.a.Title,{children:e.name})})]})},t)}))})})},ie=function(e){var t=e.playlist;return Object(R.jsx)("div",{children:Object.keys(t).length>0&&Object(R.jsx)("div",{className:"playlist",children:t.items.map((function(e,t){return Object(R.jsx)(n.a.Fragment,{children:Object(R.jsxs)(ae.a,{style:{width:"18rem"},children:[Object(R.jsx)("a",{target:"_blank",href:e.external_urls.spotify,rel:"noopener noreferrer",className:"card-image-link",children:F.a.isEmpty(e.images)?Object(R.jsx)("img",{src:re,alt:""}):Object(R.jsx)(ae.a.Img,{variant:"top",src:e.images[0].url,alt:""})}),Object(R.jsxs)(ae.a.Body,{children:[Object(R.jsx)(ae.a.Title,{children:e.name}),Object(R.jsx)(ae.a.Text,{children:Object(R.jsxs)("small",{children:["By ",e.owner.display_name]})})]})]})},t)}))})})},oe=function(e){var t=e.tracks;return console.log("displaying tracks",t),Object(R.jsx)(n.a.Fragment,{children:Object.keys(t).length>0&&Object(R.jsx)("div",{className:"tracks",children:t.items.map((function(e,t){e.name,e.id,e.trackNumber,e.duration,e.href,e.album.name;return console.log("track info",e),Object(R.jsx)(n.a.Fragment,{children:Object(R.jsxs)(ae.a,{style:{width:"18rem"},children:[Object(R.jsx)("a",{target:"_blank",href:e.external_urls.spotify,rel:"noopener noreferrer",className:"card-image-link",children:F.a.isEmpty(e.album.images)?Object(R.jsx)("img",{src:re,alt:""}):Object(R.jsx)(ae.a.Img,{variant:"top",src:e.album.images[0].url,alt:""})}),Object(R.jsxs)(ae.a.Body,{children:[Object(R.jsx)(ae.a.Title,{children:e.name}),Object(R.jsx)(ae.a.Text,{children:Object(R.jsx)("small",{children:e.artists.map((function(e){return e.name})).join(", ")})})]})]})},t)}))})})},le=function(e){var t=e.isValidSession,a=e.loadMore,r=e.result,c=e.setCategory,s=e.selectedCategory,i=r.albums,o=r.artists,l=r.playlist,u=r.tracks;return t()?Object(R.jsxs)(n.a.Fragment,{children:[Object(R.jsxs)("div",{className:"search-buttons",children:[!F.a.isEmpty(i.items)&&Object(R.jsx)("button",{className:"".concat("albums"===s?"btn active":"btn"),onClick:function(){return c("albums")},children:"Albums"}),!F.a.isEmpty(o.items)&&Object(R.jsx)("button",{className:"".concat("artists"===s?"btn active":"btn"),onClick:function(){return c("artists")},children:"Artists"}),!F.a.isEmpty(l.items)&&Object(R.jsx)("button",{className:"".concat("playlist"===s?"btn active":"btn"),onClick:function(){return c("playlist")},children:"PlayLists"}),!F.a.isEmpty(u.items)&&Object(R.jsx)("button",{className:"".concat("tracks"===s?"btn active":"btn"),onClick:function(){return c("tracks")},children:"Tracks"})]}),Object(R.jsx)("div",{className:"".concat("albums"===s?"":"hide"),children:i&&Object(R.jsx)(ne,{albums:i})}),Object(R.jsx)("div",{className:"".concat("artists"===s?"":"hide"),children:o&&Object(R.jsx)(se,{artists:o})}),Object(R.jsx)("div",{className:"".concat("playlist"===s?"":"hide"),children:l&&Object(R.jsx)(ie,{playlist:l})}),Object(R.jsx)("div",{className:"".concat("tracks"===s?"":"hide"),children:u&&Object(R.jsx)(oe,{tracks:u})}),!F.a.isEmpty(r[s])&&!F.a.isEmpty(r[s].next)&&Object(R.jsx)("div",{className:"load-more",onClick:function(){return a(s)},children:Object(R.jsx)("button",{className:"button-color",type:"button",children:"Load More"})})]}):Object(R.jsx)(A.a,{to:{pathname:"/",state:{session_expired:!0}}})},ue=a(109),je=function(e){var t=Object(r.useState)(""),a=Object(B.a)(t,2),n=a[0],c=a[1],s=Object(r.useState)(""),i=Object(B.a)(s,2),o=i[0],l=i[1];return Object(R.jsx)("div",{children:Object(R.jsxs)(ue.a,{onSubmit:function(t){t.preventDefault(),""!==n.trim()?(l(""),e.handleSearch(n)):l("Please enter a search term.")},children:[o&&Object(R.jsx)("p",{className:"errorMsg",children:o}),Object(R.jsx)(ue.a.Group,{controlId:"formBasicEmail",children:Object(R.jsx)(ue.a.Control,{type:"search",name:"searchTerm",value:n,placeholder:"Search for album, artist, track, or playlist",onChange:function(e){var t=e.target.value;c(t)},autoComplete:"off"})}),Object(R.jsx)("button",{className:"button-color",type:"submit",children:"Search"})]})})},be=function(e){var t=Object(r.useState)(document.createElement("div")),a=Object(B.a)(t,1)[0],n=document.querySelector("#loader");return Object(r.useEffect)((function(){n.appendChild(a).classList.add("message")}),[n,a]),Object(r.useEffect)((function(){e.show?(n.classList.remove("hide"),document.body.classList.add("loader-open")):(n.classList.add("hide"),document.body.classList.remove("loader-open"))}),[n,e.show]),s.a.createPortal(e.children,a)},de=(a(64),a(111)),he=a(110),me=function(e){return Object(R.jsx)("div",{children:Object(R.jsxs)(de.a,{className:"color-nav",variant:"dark",children:[Object(R.jsxs)(de.a.Brand,{href:"/",children:[Object(R.jsx)("img",{alt:"",src:"https://i.imgur.com/GWB36eY.png",width:"40",height:"40",className:"d-inline-block align-top"})," "]}),Object(R.jsx)(de.a.Brand,{href:"/",children:"Chromatify"}),Object(R.jsxs)(he.a,{className:"me-auto",children:[Object(R.jsx)(he.a.Link,{href:"/chromatify/created",children:"Added Tracks"}),Object(R.jsx)(he.a.Link,{href:"/chromatify/newtrack",children:"Add Track"})]})]})})},pe=Object(i.b)((function(e){return{albums:e.albums,artists:e.artists,playlist:e.playlist,tracks:e.tracks}}))((function(e){var t=Object(r.useState)(!1),a=Object(B.a)(t,2),n=a[0],c=a[1],s=Object(r.useState)("albums"),i=Object(B.a)(s,2),o=i[0],l=i[1],u=e.isValidSession,j=e.history,b=function(){var t=Object(Y.a)(W.a.mark((function t(a){var r,n,s,i,o;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!u()){t.next=21;break}r=e.dispatch,n=e.albums,s=e.artists,i=e.playlist,o=e.tracks,c(!0),t.t0=a,t.next="albums"===t.t0?6:"artists"===t.t0?9:"playlist"===t.t0?12:"tracks"===t.t0?15:18;break;case 6:return t.next=8,r(Q(n.next));case 8:return t.abrupt("break",18);case 9:return t.next=11,r($(s.next));case 11:return t.abrupt("break",18);case 12:return t.next=14,r(ee(i.next));case 14:return t.abrupt("break",18);case 15:return t.next=17,r(te(o.next));case 17:return t.abrupt("break",18);case 18:c(!1),t.next=22;break;case 21:j.push({pathname:"/",state:{session_expired:!0}});case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d={albums:e.albums,artists:e.artists,playlist:e.playlist,tracks:e.tracks};return Object(R.jsx)(R.Fragment,{children:u()?Object(R.jsxs)("div",{children:[Object(R.jsx)(me,{}),Object(R.jsxs)("main",{className:"",children:[Object(R.jsx)(I,{}),Object(R.jsx)(je,{handleSearch:function(t){u()?(c(!0),e.dispatch(function(e){return function(){var t=Object(Y.a)(W.a.mark((function t(a){var r,n,c,s,i,o;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r="https://api.spotify.com/v1/search?query=".concat(encodeURIComponent(e),"&type=album,playlist,artist,track"),t.next=4,q(r);case 4:return n=t.sent,console.log(n),c=n.albums,s=n.artists,i=n.playlists,o=n.tracks,a(z(c)),a(G(s)),a(Z(o)),t.abrupt("return",a(X(i)));case 13:t.prev=13,t.t0=t.catch(0),console.log("error",t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()}(t)).then((function(){c(!1),l("albums")}))):j.push({pathname:"/",state:{session_expired:!0}})}}),Object(R.jsx)(be,{show:n,children:"Loading..."}),Object(R.jsx)(le,{result:d,loadMore:b,setCategory:function(e){l(e)},selectedCategory:o,isValidSession:u})]})]}):Object(R.jsx)(A.a,{to:{pathname:"/",state:{session_expired:!0}}})})})),Oe=function(){return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(me,{}),Object(R.jsx)(I,{}),"Page not found.",Object(R.jsx)(C.b,{to:"/dashboard",children:"Return to search."})]})},xe=function(){var e=Object(A.g)().state.albums,t=Object(r.useState)({albums:e}),a=Object(B.a)(t,2);a[0],a[1];return console.log({albums:e}),Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(me,{}),Object(R.jsx)("h1",{children:"Albums Detail"}),Object(R.jsx)("p",{children:e.items[0].name})]})},fe=function(){var e=Object(A.g)().state.track,t=Object(r.useState)(e),a=Object(B.a)(t,2);a[0],a[1];return console.log(e),Object(R.jsx)("h1",{children:"Test Track Details"})},ve=a(29),ye=function(e){var t={trackName:"",artistName:""},a=Object(r.useState)(t),n=Object(B.a)(a,2),c=n[0],s=n[1],i=function(e){s(Object(j.a)(Object(j.a)({},c),{},Object(ve.a)({},e.target.id,e.target.value)))},o=function(){var t=Object(Y.a)(W.a.mark((function t(a){var r,n;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("newTrack"),t.prev=1,r={method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}},t.next=5,fetch("http://localhost:9000/chromatify",r);case 5:return n=t.sent,t.next=8,n.json();case 8:t.sent,e.history.push("/chromatify/created"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}();return Object(R.jsxs)("div",{className:"new-form",children:[Object(R.jsx)(me,{}),Object(R.jsx)("h1",{children:"Couldn't find a track on Spotify? Add it here!"}),Object(R.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s(t),o(c)},children:[Object(R.jsx)("label",{htmlFor:"trackName",children:"Name:"}),Object(R.jsx)("input",{id:"trackName",name:"trackName",value:c.trackName,onChange:i}),Object(R.jsx)("label",{htmlFor:"artistName",children:"Artist:"}),Object(R.jsx)("input",{id:"artistName",name:"artistName",value:c.artistName,onChange:i}),Object(R.jsx)("input",{type:"submit",value:"Add Track"})]}),Object(R.jsx)(L.a,{variant:"info",type:"submit",children:Object(R.jsx)(C.b,{to:"/dashboard",children:"To Search"})})]})},ge=function(e){var t=Object(r.useState)({trackName:"",artistName:""}),a=Object(B.a)(t,2),n=a[0],c=a[1],s=Object(r.useState)(!0),i=Object(B.a)(s,2),o=i[0],l=i[1],u=function(){var t=Object(Y.a)(W.a.mark((function t(a){var r,n,s;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=e.match.params.id,t.next=4,fetch("http://localhost:9000/chromatify/".concat(r));case 4:return n=t.sent,t.next=7,n.json();case 7:s=t.sent,c(s),l(!1),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0),e.history.push("/chromatify");case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),b=function(){var t=Object(Y.a)(W.a.mark((function t(a,r){var n,c;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={method:"PUT",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}},console.log(n),t.next=4,fetch("http://localhost:9000/chromatify/".concat(a),n);case 4:return c=t.sent,t.next=7,c.json();case 7:t.sent,e.history.push("/chromatify/".concat(a));case 9:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),d=function(){var e=Object(Y.a)(W.a.mark((function e(t){var a,r,c;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),console.log("handleSubmit"),a=n.trackName,r=n.artistName,c={trackName:a,artistName:r},b(n._id,c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(e){c(Object(j.a)(Object(j.a)({},n),{},Object(ve.a)({},e.target.name,e.target.value)))};return Object(r.useEffect)((function(){u()}),[]),Object(R.jsxs)("div",{children:[Object(R.jsx)("h1",{children:"Edit Track"}),o?Object(R.jsx)("h3",{children:"Loading..."}):Object(R.jsxs)("form",{onSubmit:d,children:[Object(R.jsxs)("div",{children:[Object(R.jsx)("label",{htmlFor:"trackName",children:"Name:"}),Object(R.jsx)("input",{id:"trackName",name:"trackName",value:n.trackName,onChange:h})]}),Object(R.jsxs)("div",{children:[Object(R.jsx)("label",{htmlFor:"artistName",children:"Artist:"}),Object(R.jsx)("input",{id:"artistName",name:"artistName",value:n.artistName,onChange:h})]}),Object(R.jsx)("div",{children:Object(R.jsx)("input",{type:"submit",value:"Edit"})})]}),Object(R.jsx)(C.b,{to:"/dashboard",children:"Return To Search"})]})},ke=a(108),Se=function(e){var t=Object(r.useState)([]),a=Object(B.a)(t,2),n=a[0],c=a[1],s=function(){var e=Object(Y.a)(W.a.mark((function e(){var t,a;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:9000/chromatify");case 3:return t=e.sent,console.log("all tracks",t),e.next=7,t.json();case 7:a=e.sent,console.log("parsed version",a),c(a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(Y.a)(W.a.mark((function e(t){var a,r,s,i;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={method:"DELETE"},e.next=4,fetch("http://localhost:9000/chromatify/".concat(t),a);case 4:return r=e.sent,e.next=7,r.json();case 7:s=e.sent,i=n.filter((function(e){return e._id!==s._id})),c(i),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){s()}),[]),Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(me,{}),Object(R.jsx)("h1",{children:"User Added Tracks"}),Object(R.jsxs)("main",{children:[Object(R.jsxs)(ke.a,{striped:!0,bordered:!0,hover:!0,variant:"light",className:"list-table",children:[Object(R.jsx)("thead",{children:Object(R.jsxs)("tr",{children:[Object(R.jsx)("th",{children:"Name"}),Object(R.jsx)("th",{children:"Artist"}),Object(R.jsx)("th",{children:"Edit"}),Object(R.jsx)("th",{children:"Delete"})]})}),Object(R.jsx)("tbody",{children:n&&n.map((function(e){return Object(R.jsxs)("tr",{children:[Object(R.jsx)("td",{children:e.trackName}),Object(R.jsx)("td",{children:e.artistName}),Object(R.jsx)("td",{children:Object(R.jsx)(C.b,{to:"/chromatify/".concat(e._id,"/edittrack"),children:"Edit"})}),Object(R.jsx)("td",{onClick:function(){return i(e._id)},className:"delete",children:"Delete"})]},e._id)}))})]}),Object(R.jsx)(L.a,{variant:"info",type:"submit",children:Object(R.jsx)(C.b,{to:"/chromatify/newtrack",children:"Add Track"})})]})]})},Ne=function(e){Object(E.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(_.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={expiryTime:"0"},e.setExpiryTime=function(t){e.setState({expiryTime:t})},e.isValidSession=function(){return(new Date).getTime()<e.state.expiryTime},e}return Object(T.a)(a,[{key:"componentDidMount",value:function(){var e;try{e=JSON.parse(localStorage.getItem("expiry_time"))}catch(t){e="0"}this.setState({expiryTime:e})}},{key:"render",value:function(){var e=this;return Object(R.jsx)(C.a,{children:Object(R.jsx)("div",{className:"main",children:Object(R.jsxs)(A.d,{children:[Object(R.jsx)(A.b,{path:"/",exact:!0,render:function(t){return Object(R.jsx)(P,Object(j.a)({isValidSession:e.isValidSession},t))}}),Object(R.jsx)(A.b,{path:"/redirect",render:function(t){return Object(R.jsx)(H,Object(j.a)({isValidSession:e.isValidSession,setExpiryTime:e.setExpiryTime},t))}}),Object(R.jsx)(A.b,{path:"/dashboard",render:function(t){return Object(R.jsx)(pe,Object(j.a)({isValidSession:e.isValidSession},t))}}),Object(R.jsx)(A.b,{path:"/chromatify/albumdetails/:id",render:function(t){return Object(R.jsx)(xe,Object(j.a)({isValidSession:e.isValidSession},t))}}),Object(R.jsx)(A.b,{path:"/chromatify/trackdetails/:id",render:function(t){return Object(R.jsx)(fe,Object(j.a)({isValidSession:e.isValidSession},t))}}),Object(R.jsx)(A.b,{path:"/chromatify/created",render:function(t){return Object(R.jsx)(Se,Object(j.a)({isValidSession:e.isValidSession},t))}}),Object(R.jsx)(A.b,{path:"/chromatify/newtrack",render:function(t){return Object(R.jsx)(ye,Object(j.a)({isValidSession:e.isValidSession},t))}}),Object(R.jsx)(A.b,{path:"/chromatify/:id/edittrack",render:function(t){return Object(R.jsx)(ge,Object(j.a)({isValidSession:e.isValidSession},t))}}),Object(R.jsx)(A.b,{component:Oe})]})})})}}]),a}(n.a.Component),_e=Ne;a(104);s.a.render(Object(R.jsx)(i.a,{store:N,children:Object(R.jsx)(_e,{})}),document.getElementById("root"))}},[[105,1,2]]]);
//# sourceMappingURL=main.95bcf9d4.chunk.js.map